location /api/ {
    # 1. 设置目标地址变量 (使用变量强制动态解析)
    set $api_target "http://fastapi_app_isra_tracking_fun:8000"; 
    
    # 2. 转发请求
    # proxy_pass 会将请求 URI (例如 /api/meta_data) 完整地附加到目标地址后面
    # 转发后的地址是： http://backend:8000/api/meta_data
    proxy_pass $api_target$request_uri; 
    
    # 3. 设置必要的头部信息
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
}
